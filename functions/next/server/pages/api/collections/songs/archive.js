"use strict";(()=>{var e={};e.id=270,e.ids=[270],e.modules={260:(e,t,n)=>{n.d(t,{Sm:()=>s,Z2:()=>r,fb:()=>i,nM:()=>o});let a={};function r(e,t=6e5){let n=a[e],i=Date.now();return n&&i-n.timestamp<t?n.data:null}function i(e,t){a[e]={data:t,timestamp:Date.now()}}async function o(e,t){let n=r(e,1/0);if(n)return n;let a=await t();return i(e,a),a}function s(e){e?delete a[e]:Object.keys(a).forEach(e=>delete a[e])}},1402:e=>{e.exports=import("@prisma/extension-accelerate")},1617:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>s});var r=n(2978),i=n(260),o=e([r]);async function s(e,t){try{let e=await (0,i.nM)("songs-archive",async()=>(console.log("\uD83D\uDFE1 Cache miss: fetching distinct songs from DB"),(await r.A.setlistEntry.findMany({distinct:["songName"],select:{songName:!0,songSlug:!0},orderBy:{songName:"asc"}})).map(e=>({name:e.songName,slug:e.songSlug}))));return console.log("\uD83D\uDFE2 Cache hit: using songs-archive from memory"),t.setHeader("Cache-Control","s-maxage=600, stale-while-revalidate"),t.status(200).json(e)}catch(e){console.error("âŒ Error in /api/songs/archive:",e),t.status(500).json({error:"Internal Server Error"})}}r=(o.then?(await o)():o)[0],a()}catch(e){a(e)}})},2978:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>s});var r=n(6330),i=n(1402),o=e([i]);i=(o.then?(await o)():o)[0];let s=new r.PrismaClient().$extends((0,i.withAccelerate)());a()}catch(e){a(e)}})},3480:(e,t,n)=>{e.exports=n(5600)},3972:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{config:()=>u,default:()=>l,routeModule:()=>d});var r=n(3480),i=n(8667),o=n(6435),s=n(1617),c=e([s]);s=(c.then?(await c)():c)[0];let l=(0,o.M)(s,"default"),u=(0,o.M)(s,"config"),d=new r.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/collections/songs/archive",pathname:"/api/collections/songs/archive",bundlePath:"",filename:""},userland:s});a()}catch(e){a(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6330:e=>{e.exports=require("@prisma/client")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var t=require("../../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=3972);module.exports=n})();