"use strict";(()=>{var e={};e.id=395,e.ids=[395],e.modules={260:(e,t,a)=>{a.d(t,{Sm:()=>o,Z2:()=>n,fb:()=>s,nM:()=>i});let r={};function n(e,t=6e5){let a=r[e],s=Date.now();return a&&s-a.timestamp<t?a.data:null}function s(e,t){r[e]={data:t,timestamp:Date.now()}}async function i(e,t){let a=n(e,1/0);if(a)return a;let r=await t();return s(e,r),r}function o(e){e?delete r[e]:Object.keys(r).forEach(e=>delete r[e])}},1402:e=>{e.exports=import("@prisma/extension-accelerate")},1838:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>o});var n=a(2978),s=a(260),i=e([n]);async function o(e,t){let{q:a}=e.query;if(!a||a.length<2)return t.status(400).json([]);let r=a.toLowerCase().trim(),i=`search-${r}`,o=(0,s.Z2)(i);if(o)return t.setHeader("Cache-Control","s-maxage=600, stale-while-revalidate"),t.status(200).json(o);let l=r.split(/\s+/).map(e=>e.replace(/[^\w]/g,"")).filter(Boolean);try{let e=(await n.A.setlistEntry.findMany({where:{song:{contains:r,mode:"insensitive"}},select:{song:!0},distinct:["song"],take:25})).map(e=>({id:`song-${e.song}`,label:e.song,type:"song",slug:e.song.toLowerCase().replace(/\s+/g,"-"),priority:+!e.song.toLowerCase().startsWith(r)})).sort((e,t)=>e.priority-t.priority).slice(0,10),a=(await n.A.show.findMany({select:{id:!0,venue:!0,city:!0,state:!0,showDate:!0}})).map(e=>{let t=e.showDate.toISOString().split("T")[0],[a,r,n]=t.split("-"),s=a.slice(-2),i={venue:e.venue.toLowerCase(),city:e.city.toLowerCase(),state:e.state.toLowerCase(),yearFull:a,yearShort:s},o=l.map(e=>i.yearFull===e||i.yearShort===e?10:i.venue.startsWith(e)||i.city.startsWith(e)?8:i.state.startsWith(e)?6:i.venue.includes(e)||i.city.includes(e)||i.state.includes(e)?2:0),c=o.reduce((e,t)=>e+t,0);return o.every(e=>e>0)?{id:e.id,venue:e.venue,city:e.city,state:e.state,showDate:t,year:a,month:r,day:n,score:c}:null}).filter(Boolean).sort((e,t)=>t.score-e.score).slice(0,10).map(e=>{let t=`${e.month}/${e.day}/${e.year}`,a=`${e.year}-${e.month}-${e.day}`;return{id:`show-${e.id}`,label:`${e.venue} â€“ ${e.city}, ${e.state} (${t})`,type:"show",slug:a}}),o=[...e,...a];return(0,s.fb)(i,o),t.setHeader("Cache-Control","s-maxage=600, stale-while-revalidate"),t.status(200).json(o)}catch(e){console.error("Search API error:",e),t.status(500).json({error:"Failed to search"})}}n=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},2978:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{A:()=>o});var n=a(6330),s=a(1402),i=e([s]);s=(i.then?(await i)():i)[0];let o=new n.PrismaClient().$extends((0,s.withAccelerate)());r()}catch(e){r(e)}})},3480:(e,t,a)=>{e.exports=a(5600)},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6330:e=>{e.exports=require("@prisma/client")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9830:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>c,routeModule:()=>d});var n=a(3480),s=a(8667),i=a(6435),o=a(1838),l=e([o]);o=(l.then?(await l)():l)[0];let c=(0,i.M)(o,"default"),u=(0,i.M)(o,"config"),d=new n.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/search",pathname:"/api/search",bundlePath:"",filename:""},userland:o});r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=9830);module.exports=a})();